---
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import productos from '../data/productos.json';

const categorias = [...new Set(productos.map(p => p.categoria))];
---

<Layout title="Cat치logo" description="Explora nuestra colecci칩n de productos impresos en 3D">
  <section class="catalog-section">
    <div class="container">
      <div class="catalog-header">
        <h1>Cat치logo</h1>
        <p class="catalog-subtitle">Explora nuestra colecci칩n de productos</p>
      </div>

      <div class="catalog-filters">
        <button class="filter-btn active" data-filter="todos">Todos</button>
        {categorias.map(cat => (
          <button class="filter-btn" data-filter={cat}>{cat}</button>
        ))}
      </div>

      <div class="products-grid">
        {productos.map((producto) => (
          <div class="product-item" data-categoria={producto.categoria}>
            <ProductCard
              nombre={producto.nombre}
              imagen={producto.imagen}
              precio={producto.precio}
              slug={producto.slug}
              categoria={producto.categoria}
            />
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>

<script>
  const filterBtns = document.querySelectorAll('.filter-btn');
  const productItems = document.querySelectorAll('.product-item');

  filterBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const filter = btn.getAttribute('data-filter');

      filterBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      productItems.forEach(item => {
        const categoria = item.getAttribute('data-categoria');
        if (filter === 'todos' || categoria === filter) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });
  });
</script>

<style>
  .catalog-section {
    padding: 32px 0 60px;
  }

  .catalog-header {
    text-align: center;
    margin-bottom: 24px;
  }

  .catalog-header h1 {
    font-size: 1.8rem;
    font-weight: 700;
    color: #111827;
    margin: 0 0 8px 0;
  }

  .catalog-subtitle {
    color: #6b7280;
    font-size: 1rem;
    margin: 0;
  }

  .catalog-filters {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 32px;
    flex-wrap: wrap;
    padding: 0 8px;
  }

  .filter-btn {
    padding: 10px 18px;
    border-radius: 50px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #4b5563;
    background-color: #fff;
    border: 1px solid #e5e5e5;
    cursor: pointer;
    text-transform: capitalize;
    transition: all 0.15s ease;
  }

  .filter-btn:hover {
    border-color: #2563eb;
    color: #2563eb;
  }

  .filter-btn.active {
    background-color: #2563eb;
    border-color: #2563eb;
    color: white;
  }

  .products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  @media (max-width: 900px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
  }

  @media (max-width: 600px) {
    .catalog-section {
      padding: 20px 0 40px;
    }

    .catalog-header {
      margin-bottom: 16px;
    }

    .catalog-header h1 {
      font-size: 1.4rem;
      margin-bottom: 4px;
    }

    .catalog-subtitle {
      font-size: 0.9rem;
    }

    .catalog-filters {
      gap: 6px;
      margin-bottom: 20px;
    }

    .filter-btn {
      padding: 8px 14px;
      font-size: 0.8rem;
    }

    .products-grid {
      grid-template-columns: 1fr;
      gap: 14px;
    }
  }
</style>
